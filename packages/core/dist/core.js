!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("@spiral-toolkit/core",[],e):"object"==typeof exports?exports["@spiral-toolkit/core"]=e():t["@spiral-toolkit/core"]=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=2)}([function(t,e,n){"use strict";var o=function(t){this._storage={},this._allowedEvents=t};o.prototype.on=function(t,e){t.replace(/\s{2,}/g," ").split(" ").forEach((function(n){this._allowedEvents&&-1===this._allowedEvents.indexOf(n)?console.warn("Events. Try to register event %s, but event is not allowed",n):(this._storage.hasOwnProperty(t)||(this._storage[n]=[]),this._storage[n].push(e))}),this)},o.prototype.registerAction=o.prototype.on,o.prototype.off=function(t,e){alert("You try to remove action. This part is incomplete")},o.prototype.trigger=function(t,e){if(this._allowedEvents&&-1===this._allowedEvents.indexOf(t))console.warn("Events. Try to trigger event %s, but event is not allowed",t);else if(this._storage.hasOwnProperty(t))for(var n=0,o=this._storage[t].length;n<o;n++)this._storage[t][n](e)},o.prototype.performAction=o.prototype.trigger,t.exports=o},function(t,e,n){"use strict";var o=function(t,e){this.data={},t&&("[object Object]"!==Object.prototype.toString.call(t)?console.warn("LikeFormData can't accept non Object. Please reefer to documentation. Problem parameter is:",t):this.data=t),this.boundary=e||"SpiralFormData-"+Math.random().toString().substr(2)};o.prototype.append=function(t,e){this.data[t]=e},o.prototype.toString=function(){var t="",e=this.boundary,n=function(o,r){for(var s in o)o.hasOwnProperty(s)&&void 0!==o[s]&&("object"==typeof o[s]?n(o[s],0===r.length?s:r+"["+s+"]"):t+="--"+e+"\r\nContent-Disposition: form-data; name="+(0===r.length?s:r+"["+s+"]")+"\r\n\r\n"+o[s]+"\r\n")};return"object"!=typeof this.data&&(this.data={data:this.data}),n(this.data,""),t+="--"+this.boundary+"--\r\n"},o.prototype.delete=function(t){return delete this.data[t]},o.prototype.get=function(t){return this.data[t]},o.prototype.getAll=function(){return this.data},o.prototype.has=function(t){return this.data.hasOwnProperty(t)},o.prototype.set=function(t,e){this.data[t]=e},o.prototype.getContentTypeHeader=function(){return"multipart/form-data; charset=utf-8; boundary="+this.boundary},t.exports=o},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";var o=n(4),r={core:o.core,helpers:o.helpers,tools:o.tools};if(n(12),n(13),"function"!=typeof s)var s=n(14).Promise;r.hasOwnProperty("options")||(r.options={instances:{}}),r.options.hasOwnProperty("instances")||(r.options.instances={}),window&&!window.hasOwnProperty("sf")&&(window.sf=r),r.instancesController=new r.core.InstancesController(r),r.domMutation=new r.core.DomMutations(r.instancesController),r.events=new r.core.Events,n(17)(r.events),r.ajax=new r.core.Ajax(window&&window.csrfToken?{headers:{"X-CSRF-Token":window.csrfToken}}:null),n(18)(r),r.createModulePrototype=function(){return Object.create(r.core.BaseDOMConstructor.prototype)},r.registerInstanceType=r.instancesController.registerInstanceType.bind(r.instancesController),r.addInstance=r.instancesController.addInstance.bind(r.instancesController),r.removeInstance=r.instancesController.removeInstance.bind(r.instancesController),r.getInstance=r.instancesController.getInstance.bind(r.instancesController),r.getInstances=r.instancesController.getInstances.bind(r.instancesController),r.closest=o.helpers.domTools.closest,r.resolveKeyPath=o.tools.resolveKeyPath,t.exports=r},function(t,e,n){var o={Ajax:n(5),BaseDOMConstructor:n(6),DomMutations:n(7),Events:n(0),InstancesController:n(8)},r={DOMEvents:n(9),domTools:n(10),LikeFormData:n(1),tools:n(11)},s={core:o,helpers:r,tools:r.tools};t.exports=s},function(t,e,n){"use strict";var o=n(0),r=n(1),s=function(t){this.currentRequests=0,this.events=new o(["beforeSend","load"]),t&&t.headers&&(this.headers=Object.assign(this.headers,t.headers))};s.prototype.headers={"X-Requested-With":"XMLHttpRequest"},s.prototype.send=function(t){var e,n=this;null!==t.data&&void 0!==t.data&&"undefined"!==t.data||(t.data=null),t.method||(t.method="POST"),t.headers=t.headers?Object.assign(t.headers,this.headers,t.headers):Object.assign({},this.headers);var o=new Promise((function(o,s){t.url||(console.error("You should provide url"),s("You should provide url")),n.currentRequests++;var i,a=!1;"undefined"!=typeof window&&window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType&&0===url.indexOf("http")?(e=new XDomainRequest,a=!0,e.onprogress=function(e){t.onProgress&&t.onProgress(e)}):(e=new XMLHttpRequest,t.onProgress&&e.upload.addEventListener("progress",(function(e){e.lengthComputable&&t.onProgress(e.loaded,e.total)}),!1)),e.open(t.method,t.url),e.onload=function(){n.currentRequests--;var r=n._parseJSON(e);r.status?r.status>199&&r.status<300?o(r):r.status>399&&r.status<600?s(r):(console.error("unknown status %d. Rejecting",r.status),s(r)):a?o(r):s(r),t.response=r,n.events.trigger("load",t)},e.onerror=function(){n.currentRequests--,s(Error("Network Error"),e)},n.events.trigger("beforeSend",t),null!==t.data?a?i="IEJSON"+JSON.stringify(t.data):(-1!==t.data.toString().indexOf("FormData")?i=t.data:(i=new r(t.data),t.headers["content-type"]=i.getContentTypeHeader()),n._setHeaders(e,t.headers)):i=null;try{e.send(i)}catch(t){e.send(i.toString())}return e}));return t.isReturnXHRToo?[o,e]:o},s.prototype._setHeaders=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])},s.prototype._parseJSON=function(t){t.response||(t.response=t.responseText);var e={},n=!1;if(t.getResponseHeader&&(n=t.getResponseHeader("Content-Type")),n&&"application/json"!==n.toLowerCase()&&"text/json"!==n.toLowerCase()&&"inode/symlink"!==n.toLowerCase())e={data:t.response};else try{e=JSON.parse(t.response)}catch(n){console.error("Not a JSON!",t.response),e={data:t.response}}return e.status||(e.status=t.status),"string"==typeof e.status&&0===e.status.indexOf("HTTP/")&&e.status.match(/ (\d\d\d)/)&&(e.status=parseInt(e.status.match(/ (\d\d\d)/)[1])),e.statusText||(e.statusText=t.statusText),t.status&&t.status!=e.status&&console.warn("Status from request %d, but response contains status %d",t.status,e.status),e},t.exports=s},function(t,e,n){"use strict";var o=function(){};o.prototype.init=function(t,e,n){this.sf=t,this.node=e,this.options=Object.assign(this.grabOptions(e),n)},o.prototype.optionsToGrab={},o.prototype.grabOptions=function(t){var e,n,o={};for(var r in this.optionsToGrab)this.optionsToGrab.hasOwnProperty(r)&&(e=null,this.optionsToGrab.hasOwnProperty(r)&&((n=this.optionsToGrab[r]).hasOwnProperty("value")&&(e=n.value),this.sf.options.instances[this.name]&&this.sf.options.instances[this.name].hasOwnProperty(r)&&(e=this.sf.options.instances[this.name][r]),n.hasOwnProperty("domAttr")&&t.attributes.hasOwnProperty(n.domAttr)&&(e=t.attributes[n.domAttr].value),n.hasOwnProperty("processor")&&(e=n.processor.call(this,t,e,n)),null!==e&&(o[r]=e)));return o},t.exports=o},function(t,e,n){"use strict";var o=function(t){if(t)if(this.constructor){this.instancesController=t;var e=this;this.observer=new MutationObserver((function(){e.onDomMutate.apply(e,arguments)})),this.observer.observe(document,{attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["class"]})}else console.error("Please call DomMutations with new  - 'new DomMutations()' ");else console.error("You should provide instancesController  for DOM Mutation. Because DOM Mutation  should known all classes and")};o.prototype.onDomMutate=function(t){var e=this.instancesController.getClasses(),n="."+e.join(",.");return 1!==n.length&&(t.forEach((function(t){switch(t.type){case"attributes":this.processMutationAttributes(t,e);break;case"characterData":break;case"childList":this.processMutationChildList(t.addedNodes,"addInstance",n,e),this.processMutationChildList(t.removedNodes,"removeInstance",n,e);break;case"default":console.error("Something wrong. Contact tech support")}}),this),!0)},o.prototype.processMutationAttributes=function(t,e){var n=this,o=t.target.className.split(" "),r=t.oldValue?t.oldValue.split(" "):[],s=o.filter((function(t){return-1===r.indexOf(t)})),i=r.filter((function(t){return-1===o.indexOf(t)})),a=s.filter((function(t){return-1!==e.indexOf(t)}));i.filter((function(t){return-1!==e.indexOf(t)})).forEach((function(e){n.instancesController.removeInstance(n.instancesController.getInstanceNameByCssClass(e),t.target)})),a.forEach((function(e){n.instancesController.addInstance(n.instancesController.getInstanceNameByCssClass(e),t.target)}))},o.prototype.processMutationChildList=function(t,e,n,o){var r=this;function s(t){o.forEach((function(n){t.classList.contains(n)&&r.instancesController[e](r.instancesController.getInstanceNameByCssClass(n),t)}))}[].forEach.call(t,(function(t){return 1===t.nodeType&&"SCRIPT"!==t.nodeName&&"LINK"!==t.nodeName&&(s(t),[].forEach.call(t.querySelectorAll(n),s),!0)}))},o.prototype.stopObserve=function(){this.observer.disconnect()},t.exports=o},function(t,e,n){"use strict";var o=function(t){this.spiral=t,this.constructor?this._storage={instancesConstructors:{cssClasses:{},jsConstructors:{}},addons:{},instances:{}}:console.error("Please call InstancesController with new  - 'new InstancesController()' ")};o.prototype.registerInstanceType=function(t,e,n){var o=t.prototype.name;if(o||console.error("Instance constructor should have name inside it"),this._storage.instancesConstructors.jsConstructors.hasOwnProperty(o))console.error("Instance Constructor for type '%s' already added. Skipping",o);else if(e&&(this._storage.instancesConstructors.cssClasses[e]=o),this._storage.instancesConstructors.jsConstructors[o]=t,this._storage.instances[o]=[],!n)for(var r=document.getElementsByClassName(e),s=0,i=r.length;s<i;s++)this.addInstance(o,r[s])},o.prototype.addInstanceType=function(t,e,n){return console.warn("addInstanceType is deprecated. Please use registerInstanceType instead"),this.registerInstanceType(e,n)},o.prototype.addInstance=function(t,e,n){var o=this._storage.instancesConstructors.jsConstructors[t],r=this.getInstance(t,e);if(!o||r)return!1;var s=new o(this.spiral,e,n);return this._storage.instances[t].push({node:e,instance:s}),s},o.prototype.removeInstance=function(t,e){var n,o=this.getInstance(t,e,!0);return!!o&&(o.instance.die(),-1!==(n=this._storage.instances[t].indexOf(o))&&this._storage.instances[t].splice(n,1),!0)},o.prototype.getInstance=function(t,e,n){var o=this._storage.instances[t],r=!1;if(!o)return!1;if(!(e=e instanceof HTMLElement?e:document.getElementById(e)))return!1;for(var s=0,i=o.length;s<i;s++)if(o[s].node===e){r=n?o[s]:o[s].instance;break}return r},o.prototype.getInstances=function(t){return this._storage.instances[t]||!1},o.prototype.registerAddon=function(t,e,n,o){this._storage.addons.hasOwnProperty(e)||(this._storage.addons[e]={}),this._storage.addons[e].hasOwnProperty(n)||(this._storage.addons[e][n]={}),this._storage.addons[e][n].hasOwnProperty(o)?console.error("The %s addon type %s already registered for instance %s! Skipping registration.",o,n,e):this._storage.addons[e][n][o]=t},o.prototype.getInstanceAddon=function(t,e,n){return!!(this._storage.addons.hasOwnProperty(t)&&this._storage.addons[t].hasOwnProperty(e)&&this._storage.addons[t][e].hasOwnProperty(n))&&this._storage.addons[t][e][n]},o.prototype.getClasses=function(){return Object.keys(this._storage.instancesConstructors.cssClasses)},o.prototype.getInstanceNameByCssClass=function(t){return this._storage.instancesConstructors.cssClasses[t]},o.prototype.getInstanceConstructors=function(t){},t.exports=o},function(t,e,n){"use strict";var o=function(){this._DOMEventsStorage=[]};o.prototype.add=function(t){"[object Array]"!==Object.prototype.toString.call([])&&(t=[t]),t.forEach((function(t){t.useCapture=!!t.useCapture,t.DOMNode.addEventListener(t.eventType,t.eventFunction,t.useCapture),this._DOMEventsStorage.push(t)}),this)},o.prototype.remove=function(t){console.warn("TODO IMPLEMENT")},o.prototype.removeAll=function(){this._DOMEventsStorage.forEach((function(t){t.DOMNode.removeEventListener(t.eventType,t.eventFunction,t.useCapture)})),this._DOMEventsStorage=[]},t.exports=o},function(t,e){t.exports={closest:function(t,e){for(var n,o=(e="string"==typeof e?[e]:e).length,r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t&&t.parentNode;){for(n=0;n<o;n++)if(r.call(t,e[n]))return t;t=t.parentNode}return!1},closestByClassName:function(t,e){for(var n,o=(e="string"==typeof e?[e]:e).length;t&&t.parentNode;){for(n=0;n<o;n++){var r=new RegExp("(\\s|^)"+e[n]+"(\\s|$)");if(t.className.match(r))return t}t=t.parentNode}return!1}}},function(t,e,n){"use strict";var o={resolveKeyPath:function(t,e,n){return t.split(".").reduce((function(t,e){return n?t?t[e]:void 0:t[e]}),e||self)}};t.exports=o},function(t,e){!function(){for(var t,e=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],o=n.length,r=window.console=window.console||{};o--;)r[t=n[o]]||(r[t]=e)}()},function(t,e){"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e})},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var o;o=function(){"use strict";function t(t){return"function"==typeof t}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,s=void 0,i=void 0,a=function(t,e){h[r]=t,h[r+1]=e,2===(r+=2)&&(i?i(y):b())},c="undefined"!=typeof window?window:void 0,u=c||{},l=u.MutationObserver||u.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(y,1)}}var h=new Array(1e3);function y(){for(var t=0;t<r;t+=2)(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0;r=0}var v,g,m,w,b=void 0;function _(t,e){var n=this,o=new this.constructor(T);void 0===o[C]&&R(o);var r=n._state;if(r){var s=arguments[r-1];a((function(){return N(r,o,s,n._result)}))}else L(n,o,t,e);return o}function O(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return S(e,t),e}f?b=function(){return e.nextTick(y)}:l?(g=0,m=new l(y),w=document.createTextNode(""),m.observe(w,{characterData:!0}),b=function(){w.data=g=++g%2}):p?((v=new MessageChannel).port1.onmessage=y,b=function(){return v.port2.postMessage(0)}):b=void 0===c?function(){try{var t=Function("return this")().require("vertx");return void 0!==(s=t.runOnLoop||t.runOnContext)?function(){s(y)}:d()}catch(t){return d()}}():d();var C=Math.random().toString(36).substring(2);function T(){}var j=void 0,x=1,E=2;function P(e,n,o){n.constructor===e.constructor&&o===_&&n.constructor.resolve===O?function(t,e){e._state===x?I(t,e._result):e._state===E?A(t,e._result):L(e,void 0,(function(e){return S(t,e)}),(function(e){return A(t,e)}))}(e,n):void 0===o?I(e,n):t(o)?function(t,e,n){a((function(t){var o=!1,r=function(t,e,n,o){try{t.call(e,n,o)}catch(t){return t}}(n,e,(function(n){o||(o=!0,e!==n?S(t,n):I(t,n))}),(function(e){o||(o=!0,A(t,e))}),t._label);!o&&r&&(o=!0,A(t,r))}),t)}(e,n,o):I(e,n)}function S(t,e){if(t===e)A(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(o=e),null===o||"object"!==r&&"function"!==r)I(t,e);else{var n=void 0;try{n=e.then}catch(e){return void A(t,e)}P(t,e,n)}var o,r}function M(t){t._onerror&&t._onerror(t._result),D(t)}function I(t,e){t._state===j&&(t._result=e,t._state=x,0!==t._subscribers.length&&a(D,t))}function A(t,e){t._state===j&&(t._state=E,t._result=e,a(M,t))}function L(t,e,n,o){var r=t._subscribers,s=r.length;t._onerror=null,r[s]=e,r[s+x]=n,r[s+E]=o,0===s&&t._state&&a(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var o=void 0,r=void 0,s=t._result,i=0;i<e.length;i+=3)o=e[i],r=e[i+n],o?N(n,o,r,s):r(s);t._subscribers.length=0}}function N(e,n,o,r){var s=t(o),i=void 0,a=void 0,c=!0;if(s){try{i=o(r)}catch(t){c=!1,a=t}if(n===i)return void A(n,new TypeError("A promises callback cannot return that same promise."))}else i=r;n._state!==j||(s&&c?S(n,i):!1===c?A(n,a):e===x?I(n,i):e===E&&A(n,i))}var k=0;function R(t){t[C]=k++,t._state=void 0,t._result=void 0,t._subscribers=[]}var q=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[C]||R(this.promise),o(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&I(this.promise,this._result))):A(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===j&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,o=n.resolve;if(o===O){var r=void 0,s=void 0,i=!1;try{r=t.then}catch(t){i=!0,s=t}if(r===_&&t._state!==j)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===F){var a=new n(T);i?A(a,s):P(a,t,r),this._willSettleAt(a,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(o(t),e)},t.prototype._settledAt=function(t,e,n){var o=this.promise;o._state===j&&(this._remaining--,t===E?A(o,n):this._result[e]=n),0===this._remaining&&I(o,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,(function(t){return n._settledAt(x,e,t)}),(function(t){return n._settledAt(E,e,t)}))},t}(),F=function(){function e(t){this[C]=k++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){S(t,e)}),(function(e){A(t,e)}))}catch(e){A(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return F.prototype.then=_,F.all=function(t){return new q(this,t).promise},F.race=function(t){var e=this;return o(t)?new e((function(n,o){for(var r=t.length,s=0;s<r;s++)e.resolve(t[s]).then(n,o)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},F.resolve=O,F.reject=function(t){var e=new this(T);return A(e,t),e},F._setScheduler=function(t){i=t},F._setAsap=function(t){a=t},F._asap=a,F.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var o=null;try{o=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===o&&!e.cast)return}t.Promise=F},F.Promise=F,F},t.exports=o()}).call(this,n(15),n(16))},function(t,e){var n,o,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(t){o=i}}();var c,u=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&d())}function d(){if(!l){var t=a(p);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){t.on("redirect",(function(t){var e="[object String]"===Object.prototype.toString.call(t)?t:t.url;if(/^(?:[a-z]+:)?\/\//i.test(e))self.location.href=e;else{var n=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");self.location.href=n+("/"===e.charAt(0)?e:"/"+e)}})),t.on("reload",(function(){location.reload()})),t.on("refresh",(function(){t.trigger("reload")})),t.on("close",(function(){self.close()}))}},function(t,e,n){"use strict";t.exports=function(t){t.ajax.events.on("load",(function(e){var n=e.response;if(n.hasOwnProperty("action"))if("string"==typeof n.action)t.events.trigger(n.action);else if("object"==typeof n.action){var o=Object.keys(n.action);if(-1!==o.indexOf("flash")){var r=n.action.flash,s=Date.now(),i={};"object"==typeof n.action.flash?(i=r).timestamp=s:i={message:r,timestamp:s},sessionStorage.setItem("sfFlashMessage",JSON.stringify(i))}-1!==o.indexOf("redirect")?setTimeout((function(){t.events.trigger("redirect",n.action.redirect,e)}),0|+n.action.delay):-1!==o.indexOf("name")&&setTimeout((function(){t.events.trigger(n.action.name,n.action.url)}),+n.action.delay||0)}else console.error("Action from server. Something wrong. ",n.action)})),function(t){if(t){var e,n,o,r=JSON.parse(t);Date.now()-r.timestamp>1e4||(o="debug"===r.type||"success"===r.type?"debug":"info"!==r.type&&r.type&&"notice"!==r.type?"danger":"info",e=document.createElement("div"),(n=document.createElement("div")).classList.add("flash-wrapper"),e.classList.add("flash",o),e.innerHTML=r.message,document.body.appendChild(n),n.appendChild(e),setTimeout((function(){n.classList.add("show")}),1),setTimeout((function(){n.classList.remove("show")}),r.timeout||5e3),sessionStorage.removeItem("sfFlashMessage"))}}(sessionStorage.getItem("sfFlashMessage"))}}])}));
//# sourceMappingURL=core.js.map